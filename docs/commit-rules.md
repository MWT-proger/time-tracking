# Правила создания коммитов

## Формат сообщений коммитов

Все коммиты должны следовать формату **Conventional Commits**:

```
<type>(<scope>): <subject>

<body>

<footer>
```

## Типы коммитов

- `feat`: новая функциональность
- `fix`: исправление бага
- `docs`: изменения в документации
- `style`: форматирование кода (не влияет на выполнение)
- `refactor`: рефакторинг кода
- `perf`: улучшение производительности
- `test`: добавление/изменение тестов
- `build`: изменения в системе сборки (Makefile, скрипты сборки)
- `ci`: изменения в CI/CD (GitHub Actions, .github)
- `chore`: прочие изменения (обновление зависимостей, версий и т.д.)

## Заголовок коммита

- Заголовок должен быть коротким (до 72 символов)
- Начинается с типа коммита и области изменений (если применимо)
- Используется императивное наклонение ("добавлено" вместо "добавил")
- Не заканчивается точкой
- На русском языке

## Тело коммита

- Описывает что и почему было изменено, а не как
- Отделяется от заголовка пустой строкой
- Каждая строка до 72 символов
- Можно использовать маркированные списки с префиксами типов для группировки изменений

## Примеры

### Простой коммит с одним изменением
```
feat: добавлена возможность архивирования проектов
```

### Коммит с несколькими типами изменений
```
build: добавлена автоматизация сборки и релизов

- ci: добавлен GitHub Actions workflow для автоматической сборки и релизов
- build: улучшена система сборки DEB пакетов с версионированием
- build: добавлены команды release и release-with-deb в Makefile
- build: добавлен скрипт install-deps.sh для установки зависимостей
- docs: расширена документация по установке и зависимостям
- chore: обновлена версия до 0.9.1
```

### Исправление бага
```
fix(tracking): исправлена ошибка при остановке таймера

Исправлена проблема с некорректным сохранением времени работы
при принудительной остановке таймера.
```

### Изменения в документации
```
docs: обновлена инструкция по установке

Добавлена информация о зависимостях для различных дистрибутивов Linux
и инструкции по установке через go install.
```

## Обновление CHANGELOG

**ВАЖНО**: При каждом коммите, который вносит изменения, видимые пользователю (feat, fix), ОБЯЗАТЕЛЬНО нужно обновить CHANGELOG.md.

### Правила обновления CHANGELOG:

1. **Всегда обновлять** раздел `[Unreleased]` в файле `docs/CHANGELOG.md`
2. **Типы изменений** должны соответствовать типам коммитов:
   - `### Добавлено` - для новых функций (feat)
   - `### Исправлено` - для исправлений багов (fix)
   - `### Изменено` - для изменений существующей функциональности
   - `### Удалено` - для удаленного функционала
   - `### Безопасность` - для исправлений уязвимостей

3. **Формат записи**:
   - Краткое описание изменения
   - При необходимости - детали в подпунктах
   - Использовать императивное наклонение

4. **Когда НЕ нужно обновлять CHANGELOG**:
   - `docs`: изменения только в документации (кроме README и CHANGELOG)
   - `refactor`: рефакторинг без изменения поведения
   - `style`: форматирование кода
   - `test`: добавление тестов
   - `chore`: технические изменения (зависимости, конфиги)

### Примеры обновления CHANGELOG:

#### Для нового функционала:
```markdown
## [Unreleased]

### Добавлено
- Добавлена возможность архивирования проектов
```

#### Для исправления бага:
```markdown
## [Unreleased]

### Исправлено
- Исправлено зависание таймера при активном отслеживании времени
  - Добавлена обработка паник в горутине обновления таймера
  - Добавлена защита от гонок данных через sync.RWMutex
```

#### Для нескольких изменений:
```markdown
## [Unreleased]

### Добавлено
- Создана папка docs для документации проекта
- Добавлены правила создания коммитов в формате Conventional Commits

### Исправлено
- Исправлено зависание таймера в системном трее
```

## Инструкции для AI-ассистента

При создании коммита:

1. Проанализировать все staged изменения через `git diff --cached`
2. Определить основной тип коммита по характеру изменений
3. **Проверить, нужно ли обновить CHANGELOG.md** (для feat, fix)
4. Если нужно - обновить раздел `[Unreleased]` в `docs/CHANGELOG.md`
5. Добавить обновленный CHANGELOG.md в staging (`git add docs/CHANGELOG.md`)
6. Сгруппировать изменения по типам в теле коммита
7. Использовать императивное наклонение в русском языке
8. Создать коммит с помощью команды `git commit -m "..."`

